<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>基本快照 | Git-Guidebook</title>
    <meta name="description" content="代码版本管理工具知识图谱">
    <link rel="icon" href="favicon.ico">
  <keyword content="git,gitflow,git push,git pull,Git"></keyword>
    
    <link rel="preload" href="/Git-Guidebook/assets/css/0.styles.072316e2.css" as="style"><link rel="preload" href="/Git-Guidebook/assets/js/app.8af4c2b8.js" as="script"><link rel="preload" href="/Git-Guidebook/assets/js/2.a1f55e44.js" as="script"><link rel="preload" href="/Git-Guidebook/assets/js/7.fa72cfc3.js" as="script"><link rel="prefetch" href="/Git-Guidebook/assets/js/10.4e9beccc.js"><link rel="prefetch" href="/Git-Guidebook/assets/js/11.b1145db4.js"><link rel="prefetch" href="/Git-Guidebook/assets/js/12.ae902ae1.js"><link rel="prefetch" href="/Git-Guidebook/assets/js/13.3a0a05fd.js"><link rel="prefetch" href="/Git-Guidebook/assets/js/14.51b69793.js"><link rel="prefetch" href="/Git-Guidebook/assets/js/15.5bf3b68d.js"><link rel="prefetch" href="/Git-Guidebook/assets/js/3.6cfa1d10.js"><link rel="prefetch" href="/Git-Guidebook/assets/js/4.df6dffc3.js"><link rel="prefetch" href="/Git-Guidebook/assets/js/5.6b0a7cd6.js"><link rel="prefetch" href="/Git-Guidebook/assets/js/6.260ae69d.js"><link rel="prefetch" href="/Git-Guidebook/assets/js/8.c1656397.js"><link rel="prefetch" href="/Git-Guidebook/assets/js/9.2840db48.js">
    <link rel="stylesheet" href="/Git-Guidebook/assets/css/0.styles.072316e2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Git-Guidebook/" class="home-link router-link-active"><img src="/Git-Guidebook/favicon.png" alt="Git-Guidebook" class="logo"> <span class="site-name can-hide">Git-Guidebook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Git-Guidebook/" class="nav-link">主页</a></div><div class="nav-item"><a href="https://tsejx.github.io/JavaScript-Guidebook/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaScript
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/tsejx/Git-Guidebook" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Git-Guidebook/" class="nav-link">主页</a></div><div class="nav-item"><a href="https://tsejx.github.io/JavaScript-Guidebook/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaScript
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/tsejx/Git-Guidebook" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/Git-Guidebook/setup-and-config.html" class="sidebar-link">设置和配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Git-Guidebook/setup-and-config.html#配置-git-config" class="sidebar-link">配置 git config</a></li><li class="sidebar-sub-header"><a href="/Git-Guidebook/setup-and-config.html#帮助-git-help" class="sidebar-link">帮助 git help</a></li></ul></li><li><a href="/Git-Guidebook/getting-and-creating-projects.html" class="sidebar-link">获取和创建项目</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Git-Guidebook/getting-and-creating-projects.html#初始化-git-init" class="sidebar-link">初始化 git init</a></li><li class="sidebar-sub-header"><a href="/Git-Guidebook/getting-and-creating-projects.html#克隆-git-clone" class="sidebar-link">克隆 git clone</a></li></ul></li><li><a href="/Git-Guidebook/basic-snapshotting.html" class="active sidebar-link">基本快照</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Git-Guidebook/basic-snapshotting.html#添加-git-add" class="sidebar-link">添加 git add</a></li><li class="sidebar-sub-header"><a href="/Git-Guidebook/basic-snapshotting.html#状态-git-status" class="sidebar-link">状态 git status</a></li><li class="sidebar-sub-header"><a href="/Git-Guidebook/basic-snapshotting.html#提交-git-commit" class="sidebar-link">提交 git commit</a></li><li class="sidebar-sub-header"><a href="/Git-Guidebook/basic-snapshotting.html#撤销-git-reset" class="sidebar-link">撤销 git reset</a></li><li class="sidebar-sub-header"><a href="/Git-Guidebook/basic-snapshotting.html#删除-git-rm" class="sidebar-link">删除 git rm</a></li><li class="sidebar-sub-header"><a href="/Git-Guidebook/basic-snapshotting.html#移动和重命名-git-mv" class="sidebar-link">移动和重命名 git mv</a></li></ul></li><li><a href="/Git-Guidebook/branching-and-merging.html" class="sidebar-link">分支与合并</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Git-Guidebook/branching-and-merging.html#分支-git-branch" class="sidebar-link">分支 git branch</a></li><li class="sidebar-sub-header"><a href="/Git-Guidebook/branching-and-merging.html#查看-git-checkout" class="sidebar-link">查看 git checkout</a></li><li class="sidebar-sub-header"><a href="/Git-Guidebook/branching-and-merging.html#合并-git-merge" class="sidebar-link">合并 git merge</a></li><li class="sidebar-sub-header"><a href="/Git-Guidebook/branching-and-merging.html#储藏-git-stash" class="sidebar-link">储藏 git stash</a></li><li class="sidebar-sub-header"><a href="/Git-Guidebook/branching-and-merging.html#标签-git-tag" class="sidebar-link">标签 git tag</a></li></ul></li><li><a href="/Git-Guidebook/sharing-and-updating-projects.html" class="sidebar-link">共享和更新项目</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Git-Guidebook/sharing-and-updating-projects.html#提取-git-fetch" class="sidebar-link">提取 git fetch</a></li><li class="sidebar-sub-header"><a href="/Git-Guidebook/sharing-and-updating-projects.html#推送-git-push" class="sidebar-link">推送 git push</a></li><li class="sidebar-sub-header"><a href="/Git-Guidebook/sharing-and-updating-projects.html#远程-git-remote" class="sidebar-link">远程 git remote</a></li></ul></li><li><a href="/Git-Guidebook/inspection-and-comparison.html" class="sidebar-link">检查和比较</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Git-Guidebook/inspection-and-comparison.html#日志-git-log" class="sidebar-link">日志 git log</a></li><li class="sidebar-sub-header"><a href="/Git-Guidebook/inspection-and-comparison.html#差异-git-diff" class="sidebar-link">差异 git diff</a></li></ul></li><li><a href="/Git-Guidebook/patching.html" class="sidebar-link">修补</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Git-Guidebook/patching.html#变基-git-rebase" class="sidebar-link">变基 git rebase</a></li><li class="sidebar-sub-header"><a href="/Git-Guidebook/patching.html#还原-git-revert" class="sidebar-link">还原 git revert</a></li></ul></li><li><a href="/Git-Guidebook/commit-guide-standard.html" class="sidebar-link">提交信息规范</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Git-Guidebook/commit-guide-standard.html#提交类型" class="sidebar-link">提交类型</a></li></ul></li><li><a href="/Git-Guidebook/recommend.html" class="sidebar-link">相关推荐</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Git-Guidebook/recommend.html#资源" class="sidebar-link">资源</a></li><li class="sidebar-sub-header"><a href="/Git-Guidebook/recommend.html#生态" class="sidebar-link">生态</a></li><li class="sidebar-sub-header"><a href="/Git-Guidebook/recommend.html#工具" class="sidebar-link">工具</a></li><li class="sidebar-sub-header"><a href="/Git-Guidebook/recommend.html#插件" class="sidebar-link">插件</a></li></ul></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="基本快照"><a href="#基本快照" aria-hidden="true" class="header-anchor">#</a> 基本快照</h1> <h2 id="添加-git-add"><a href="#添加-git-add" aria-hidden="true" class="header-anchor">#</a> 添加 git add</h2> <blockquote><p>Add file contents to the index</p> <p>将文件内容添加到索引</p></blockquote> <p><code>git add</code> 命令将文件内容添加到<strong>索引库</strong>（将修改记录添加到暂存区）。也就是将要提交的文件的信息添加到索引库中。</p> <h3 id="添加修改记录至暂存区"><a href="#添加修改记录至暂存区" aria-hidden="true" class="header-anchor">#</a> 添加修改记录至暂存区</h3> <p>📖 <strong>语法：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 文件</span>
$ <span class="token function">git</span> <span class="token function">add</span> <span class="token operator">&lt;</span>file1<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>file2<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>file3<span class="token operator">&gt;</span> <span class="token punctuation">..</span>.

<span class="token comment"># 目录</span>
$ <span class="token function">git</span> <span class="token function">add</span> <span class="token operator">&lt;</span>dir<span class="token operator">&gt;</span>

<span class="token comment"># 所有目录文件(包括修过过的文件、新建的文件，但不包括删除的文件)</span>
$ <span class="token function">git</span> <span class="token function">add</span> <span class="token keyword">.</span>
</code></pre></div><p>📍 <strong>示例：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 提交单个文件</span>
$ <span class="token function">git</span> <span class="token function">add</span> index.html

<span class="token comment"># 提交 markdown 文件</span>
$ <span class="token function">git</span> <span class="token function">add</span> *.md
</code></pre></div><h3 id="分次添加修改至暂存区"><a href="#分次添加修改至暂存区" aria-hidden="true" class="header-anchor">#</a> 分次添加修改至暂存区</h3> <p>添加每个变化前，都会要求确认。对于同一个文件的多处变化，可以实现分次提交。</p> <p><code>-p</code> 参数相当于 <code>--patch</code>，表示多次提交。</p> <p>📖 <strong>语法：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> <span class="token function">add</span> -p
$ <span class="token function">git</span> <span class="token function">add</span> --patch
</code></pre></div><p>📍 <strong>示例：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 将以Controller结尾的文件的所有修改添加到暂存区</span>
$ <span class="token function">git</span> <span class="token function">add</span> *Controller

<span class="token comment"># 将所有以Hello开头的文件的修改添加到暂存区 例如:HelloWorld.txt,Hello.java,HelloGit.txt ...</span>
$ <span class="token function">git</span> <span class="token function">add</span> Hello*

<span class="token comment"># 将以Hello开头后面只有一位的文件的修改提交到暂存区 例如:Hello1.txt,HelloA.java 如果是HelloGit.txt或者Hello.java是不会被添加的$ git add [file1] [file2] ...</span>
$ <span class="token function">git</span> <span class="token function">add</span> Hello?
</code></pre></div><h3 id="添加跟踪修改至暂存区"><a href="#添加跟踪修改至暂存区" aria-hidden="true" class="header-anchor">#</a> 添加跟踪修改至暂存区</h3> <p>标记本地有改动（<strong>包括删除和修改，但不包括新建</strong>）的<strong>已经追踪</strong>的文件，并添加至暂存库。</p> <p><code>-u</code> 即 <code>--update</code> 表示更新索引，使其具有与 <code>&lt;pathspec&gt;</code> 匹配的条目。</p> <p>省略 <code>&lt;path&gt;</code> 表示  <code>.</code> ，即当前目录。</p> <p>📖 <strong>语法：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> <span class="token function">add</span> -u <span class="token punctuation">[</span><span class="token operator">&lt;</span>pathspec<span class="token operator">&gt;</span><span class="token punctuation">]</span>
$ <span class="token function">git</span> <span class="token function">add</span> --update <span class="token punctuation">[</span><span class="token operator">&lt;</span>pathspec<span class="token operator">&gt;</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="添加修改到暂存区"><a href="#添加修改到暂存区" aria-hidden="true" class="header-anchor">#</a> 添加修改到暂存区</h3> <p>标记本地所有改动的文件（包括删除、修改和新建），并添加至暂存库。</p> <p><code>-A</code> 即 <code>--all</code> 或 <code>--no-ignore-removal</code> 表示更新索引，不仅在工作树具有匹配 <code>&lt;pathspec&gt;</code> 的文件的位置，而且索引已经有条目的位置。</p> <p>📖 <strong>语法：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> <span class="token function">add</span> -A
$ <span class="token function">git</span> <span class="token function">add</span> --all
$ <span class="token function">git</span> <span class="token function">add</span> --no-ignore-removal
</code></pre></div><p><code>git add -A</code> 相当于同时执行 <code>git add .</code> 和 <code>git add -u</code>。</p> <h2 id="状态-git-status"><a href="#状态-git-status" aria-hidden="true" class="header-anchor">#</a> 状态 git status</h2> <blockquote><p>Show the working tree status</p> <p>显示工作树的状态</p></blockquote> <p>执行该命令会返回三部分信息：</p> <ol><li>拟提交的变更：这是已经放入暂存区，准备 <code>commit</code> 提交的变更</li> <li>未暂存的变更：这是工作目录和暂存区快照之间存在差异的文件列表</li> <li>未跟踪的文件：这类文件是被版本管理忽略的文件</li></ol> <p><code>git status</code> 不显示已经 <code>commit</code> 到项目历史中去的信息。看项目历史的信息要使用 <a href="/Git-Guidebook/6_Inspection%26Comparison.html#日志-log"><code>git log</code></a>。</p> <h3 id="查看版本修改"><a href="#查看版本修改" aria-hidden="true" class="header-anchor">#</a> 查看版本修改</h3> <p>在每次执行 <code>git commit</code> 之前先使用 <code>git status</code> 检查文件状态是一个很好的习惯，这样能防止你不小心提交了您不想提交的东西。</p> <p>📖 <strong>语法：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> status
</code></pre></div><h3 id="查看忽略文件"><a href="#查看忽略文件" aria-hidden="true" class="header-anchor">#</a> 查看忽略文件</h3> <p>可以查看添加到 <code>.gitignore</code> 的文件的状态信息。</p> <p>📖 <strong>语法：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> status --ignored
</code></pre></div><h2 id="提交-git-commit"><a href="#提交-git-commit" aria-hidden="true" class="header-anchor">#</a> 提交 git commit</h2> <blockquote><p>Record changes to the repository</p> <p>记录对存储库的更改</p></blockquote> <p><code>git commit</code> 命令用于将更改记录（提交）到存储库。将索引库的<strong>当前内容</strong>与<strong>描述更改的用户</strong>和<strong>日志消息</strong>一起存储在新的提交中。</p> <p>如果您提交，然后立即发现错误，可以使用 <a href="#%E5%9B%9E%E6%BB%9A-git-reset">git reset</a> 命令恢复。</p> <h3 id="提交至本地仓"><a href="#提交至本地仓" aria-hidden="true" class="header-anchor">#</a> 提交至本地仓</h3> <p><code>&lt;msg&gt;</code> 表示提交的版本描述，如果给出了多个 <code>-m</code> ，它们的值将作为单独的段落连接起来。</p> <p>📖 <strong>语法：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> commit -m <span class="token operator">&lt;</span>msg<span class="token operator">&gt;</span>
$ <span class="token function">git</span> commit --message <span class="token operator">&lt;</span>msg<span class="token operator">&gt;</span>
</code></pre></div><p>📍 <strong>示例：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> commit -m <span class="token string">'the commit messge'</span>
</code></pre></div><p>如果你想将暂存区指定的文件修改提交到本地仓库区，你可以使用如下的命令。<code>&lt;file&gt;</code> 表示你要提交的文件路径，文件可以是多个。</p> <p>📖 <strong>语法：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> commit <span class="token operator">&lt;</span>file1<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>file2<span class="token operator">&gt;</span> <span class="token punctuation">..</span>. -m <span class="token operator">&lt;</span>message<span class="token operator">&gt;</span>
</code></pre></div><h3 id="提交跟踪文件"><a href="#提交跟踪文件" aria-hidden="true" class="header-anchor">#</a> 提交跟踪文件</h3> <p>如果你想将工作区所有自上一次提交 <code>commit</code> 之后的变化直接提交到仓库区，你可以使用如下命令，相当于省略了 <code>git add</code>。</p> <p>对于还没有跟踪 <code>track</code> 的文件，还是需要执行 <code>git add &lt;file&gt;</code> 命令。</p> <p>📖 <strong>语法：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> commit -a
</code></pre></div><h3 id="提交时查看文件修改详情"><a href="#提交时查看文件修改详情" aria-hidden="true" class="header-anchor">#</a> 提交时查看文件修改详情</h3> <p>📖 <strong>语法：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> commit -v
</code></pre></div><h3 id="增补提交"><a href="#增补提交" aria-hidden="true" class="header-anchor">#</a> 增补提交</h3> <p>如果你想重做上一次 <code>commit</code>，并包括指定文件的新变化，那么你可以使用如下命令。</p> <p>增补提交，会使用与当前提交节点相同的父节点进行一次新的提交，旧的提交将会被取消。</p> <p>📖 <strong>语法：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> commit -amend <span class="token operator">&lt;</span>file1<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>file2<span class="token operator">&gt;</span>
</code></pre></div><p>如果你想使用一次新的提交 <code>commit</code>，替代上一次提交，那么你可以使用如下命令。如果代码没有任何新变化，则用来改写上一次 <code>commit</code> 的提交信息。</p> <p>📖 <strong>语法：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> commit -amend -m <span class="token operator">&lt;</span>message<span class="token operator">&gt;</span>
</code></pre></div><h3 id="修改提交者信息"><a href="#修改提交者信息" aria-hidden="true" class="header-anchor">#</a> 修改提交者信息</h3> <p>📖 <strong>语法：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> commit --amend --author<span class="token operator">=</span><span class="token operator">&lt;</span>author<span class="token operator">&gt;</span>
</code></pre></div><p>📍 <strong>示例：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> commit --amend --author<span class="token operator">=</span><span class="token string">'tsejx &lt;tsejx@foxmail.com&gt;'</span>
</code></pre></div><h3 id="初始化提交记录"><a href="#初始化提交记录" aria-hidden="true" class="header-anchor">#</a> 初始化提交记录</h3> <blockquote><p>⚠️ <strong>慎重操作</strong></p></blockquote> <p>也就是把所有的改动都重新放回工作区，并<strong>清空所有的<code>commit</code></strong>，这样就可以重新提交第一个 <code>commit</code> 了。</p> <p>📖 <strong>语法：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> update-ref -d HEAD
</code></pre></div><h2 id="撤销-git-reset"><a href="#撤销-git-reset" aria-hidden="true" class="header-anchor">#</a> 撤销 git reset</h2> <blockquote><p>Reset current HEAD to the specified state</p> <p>用于将当前 <code>HEAD</code> 复位到指定状态（一般用于撤消之前的一些操作）</p></blockquote> <h3 id="撤销暂存"><a href="#撤销暂存" aria-hidden="true" class="header-anchor">#</a> 撤销暂存</h3> <p>相当于对 <code>git add</code> 命令的反向操作。</p> <p>📖 <strong>语法：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 撤销暂存区的修改，重新放回工作区</span>
$ <span class="token function">git</span> reset <span class="token operator">&lt;</span>file-name<span class="token operator">&gt;</span>

<span class="token comment"># 回退暂存区里的文件，还原为（HEAD commit 里面该文件的状态）</span>
<span class="token comment"># 会撤销从上次提交之后的一些操作</span>
$ <span class="token function">git</span> reset HEAD -- <span class="token operator">&lt;</span>file-name<span class="token operator">&gt;</span>

<span class="token comment"># 重置暂存区与工作区，与上一次提交保持一致</span>
$ <span class="token function">git</span> reset --hard
</code></pre></div><h3 id="撤销到某个提交版本"><a href="#撤销到某个提交版本" aria-hidden="true" class="header-anchor">#</a> 撤销到某个提交版本</h3> <p>和 <code>revert</code> 的区别：<code>reset</code> 命令会抹去某个提交记录 <code>commit id</code> 之后的所有提交 <code>commit</code>。</p> <p>📍 <strong>示例：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 回滚当前分支的指针到指定提交版本，同时重置暂存区，但工作区不变（默认就是-mixed参数）</span>
$ <span class="token function">git</span> reset <span class="token operator">&lt;</span>commit-id<span class="token operator">&gt;</span>

<span class="token comment"># 回滚至上个版本，它将重置HEAD到另外一个提交记录,并且重置暂存区以便和HEAD相匹配，但是也到此为止。工作区不会被更改。</span>
$ <span class="token function">git</span> reset -mixed HEAD^

<span class="token comment"># 回退至三个版本之前，只回退了提交的信息，暂存区和工作区与回退之前保持一致。如果还要提交，直接commit即可。</span>
$ <span class="token function">git</span> reset -soft HEAD~3

<span class="token comment"># 回退到指定的提交版本，暂存区和工作区也会与变为指定提交版本一致</span>
$ <span class="token function">git</span> reset --hard <span class="token operator">&lt;</span>commit-id<span class="token operator">&gt;</span>

<span class="token comment"># 回退到指定提交版本，但保持暂存区和工作区不变</span>
$ <span class="token function">git</span> reset --keep <span class="token operator">&lt;</span>commit-id<span class="token operator">&gt;</span>
</code></pre></div><h3 id="中断工作流程处理"><a href="#中断工作流程处理" aria-hidden="true" class="header-anchor">#</a> 中断工作流程处理</h3> <p>在实际开发中经常出现这样的情形：你正在开发一个大的新功能（工作在分支：<code>feature</code> 中），此时来了一个紧急的 BUG 需要修复，但是目前在工作区中的内容还没有成型，还不足以提交，但是又必须切换的另外的分支去修改 BUG。</p> <p>📍 <strong>示例：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># you were working in 'feature' branch</span>
$ <span class="token function">git</span> checkout feature

<span class="token comment"># develop new feature</span>
$ <span class="token function">git</span> commit -a -m <span class="token string">&quot;snapshot WIP&quot;</span> 						<span class="token comment"># (1)</span>
$ <span class="token function">git</span> checkout master

<span class="token comment"># fix bug</span>
$ <span class="token function">git</span> commit				<span class="token comment"># commit with real log</span>

$ <span class="token function">git</span> checkout feature
$ <span class="token function">git</span> reset --soft HEAD^ 	<span class="token comment"># go back to WIP state		# (2)</span>
$ <span class="token function">git</span> reset												<span class="token comment"># (3)</span>
</code></pre></div><ol><li>这次属于临时提交，因此随便添加一个临时注释即可</li> <li>这次 <code>reset</code> 删除了 <code>WIP commit</code>，并且把工作区设置成提交 WIP 快照之前的状态。</li> <li>此时，在索引中依然遗留着“snapshot WIP”提交时所做的未提交变化，<code>git reset</code> 将会清理索引成为尚未提交”<em>snapshot WIP</em>“时的状态便于接下来继续工作。</li></ol> <h2 id="删除-git-rm"><a href="#删除-git-rm" aria-hidden="true" class="header-anchor">#</a> 删除 git rm</h2> <blockquote><p>Remove files from the working tree and from the index</p> <p>用于从工作区和索引中删除文件</p></blockquote> <h3 id="删除物理文件"><a href="#删除物理文件" aria-hidden="true" class="header-anchor">#</a> 删除物理文件</h3> <p>当我们需要删除暂存区或分支上的文件，同时工作区也不需要这个文件了。</p> <p>📖 <strong>语法：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> <span class="token function">rm</span> <span class="token operator">&lt;</span>file1<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>file2<span class="token operator">&gt;</span> <span class="token punctuation">..</span>.
</code></pre></div><h3 id="删除文件修改记录"><a href="#删除文件修改记录" aria-hidden="true" class="header-anchor">#</a> 删除文件修改记录</h3> <p>当我们需要删除<strong>暂存区或分支</strong>上的文件，但本地又需要使用，只是不希望这个文件被版本库控制。</p> <p>📖 <strong>语法：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> <span class="token function">rm</span> --cached <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>
</code></pre></div><h2 id="移动和重命名-git-mv"><a href="#移动和重命名-git-mv" aria-hidden="true" class="header-anchor">#</a> 移动和重命名 git mv</h2> <blockquote><p>Move or rename a file, a directory, or a symlin</p> <p>用于移动或重命名文件，目录或符号链接。</p></blockquote> <h3 id="重命名文件"><a href="#重命名文件" aria-hidden="true" class="header-anchor">#</a> 重命名文件</h3> <p>如果你想重命名文件，并且将这个改名放入暂存区。<code>source</code> 必须存在，并且是文件，符号链接或目录。<code>destination</code> 为重命名后的名称。</p> <p>📖 <strong>语法：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> <span class="token function">mv</span> <span class="token operator">&lt;</span>source<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>destination<span class="token operator">&gt;</span>
</code></pre></div><h3 id="移动文件"><a href="#移动文件" aria-hidden="true" class="header-anchor">#</a> 移动文件</h3> <p>移动 <code>&lt;source&gt;</code> 到 <code>&lt;destination directory&gt;</code> 。最后一个参数必须是目标目录。</p> <p>索引在成功完成后更新，但仍必须提交更改。</p> <p>📖 <strong>语法：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> <span class="token function">mv</span> <span class="token operator">&lt;</span>source<span class="token operator">&gt;</span> <span class="token punctuation">..</span>. <span class="token operator">&lt;</span>destination directory<span class="token operator">&gt;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最近更新时间: </span> <span class="time">5/12/2019, 2:22:22 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Git-Guidebook/getting-and-creating-projects.html" class="prev">
          获取和创建项目
        </a></span> <span class="next"><a href="/Git-Guidebook/branching-and-merging.html">
          分支与合并
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Git-Guidebook/assets/js/app.8af4c2b8.js" defer></script><script src="/Git-Guidebook/assets/js/2.a1f55e44.js" defer></script><script src="/Git-Guidebook/assets/js/7.fa72cfc3.js" defer></script>
  </body>
</html>
